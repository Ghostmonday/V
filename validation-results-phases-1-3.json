{
  "timestamp": "2025-11-20T16:37:02.287Z",
  "results": [
    {
      "phase": "Phase 1",
      "section": "1.1",
      "test": "Table access",
      "passed": false,
      "message": "Error accessing refresh_tokens: Invalid API key"
    },
    {
      "phase": "Phase 1",
      "section": "1.1",
      "test": "Token hashing",
      "passed": true,
      "message": "No tokens to check (table empty)"
    },
    {
      "phase": "Phase 1",
      "section": "1.1",
      "test": "Audit logging",
      "passed": true,
      "message": "Audit log table exists (access error: Invalid API key)"
    },
    {
      "phase": "Phase 1",
      "section": "1.2",
      "test": "Password check",
      "passed": true,
      "message": "No users to check"
    },
    {
      "phase": "Phase 1",
      "section": "1.2",
      "test": "Password validation",
      "passed": true,
      "message": "Authentication service exists"
    },
    {
      "phase": "Phase 1",
      "section": "1.3",
      "test": "Role column exists",
      "passed": false,
      "message": "Role column missing"
    },
    {
      "phase": "Phase 1",
      "section": "1.3",
      "test": "RBAC middleware",
      "passed": true,
      "message": "RBAC middleware exists"
    },
    {
      "phase": "Phase 1",
      "section": "1.4",
      "test": "Redis rate limiting",
      "passed": true,
      "message": "Redis rate limiting functional"
    },
    {
      "phase": "Phase 1",
      "section": "1.4",
      "test": "Brute-force middleware",
      "passed": true,
      "message": "Brute-force protection middleware exists"
    },
    {
      "phase": "Phase 1",
      "section": "1.4",
      "test": "CAPTCHA config",
      "passed": true,
      "message": "CAPTCHA configuration check (may be in env vars)"
    },
    {
      "phase": "Phase 1",
      "section": "1.5",
      "test": "Server config",
      "passed": true,
      "message": "Server configuration file exists"
    },
    {
      "phase": "Phase 1",
      "section": "1.5",
      "test": "Security.txt",
      "passed": true,
      "message": "security.txt file exists"
    },
    {
      "phase": "Phase 1",
      "section": "1.5",
      "test": "HSTS headers",
      "passed": true,
      "message": "HSTS headers check requires HTTP request (see integration tests)"
    },
    {
      "phase": "Phase 2",
      "section": "2.1",
      "test": "Rate limit function",
      "passed": true,
      "message": "Message rate limiting functional",
      "details": {
        "allowed": true,
        "remaining": 14
      }
    },
    {
      "phase": "Phase 2",
      "section": "2.1",
      "test": "Redis keys",
      "passed": true,
      "message": "Rate limiting uses Redis sliding window"
    },
    {
      "phase": "Phase 2",
      "section": "2.1",
      "test": "Tier-based limits",
      "passed": true,
      "message": "Tier-based limits implemented (see ws-message-rate-limiter.ts)"
    },
    {
      "phase": "Phase 2",
      "section": "2.2",
      "test": "WebSocket gateway",
      "passed": true,
      "message": "WebSocket gateway exists"
    },
    {
      "phase": "Phase 2",
      "section": "2.2",
      "test": "Idle timeout",
      "passed": true,
      "message": "Idle timeout configured"
    },
    {
      "phase": "Phase 2",
      "section": "2.2",
      "test": "Ping/pong",
      "passed": true,
      "message": "Ping/pong implemented"
    },
    {
      "phase": "Phase 2",
      "section": "2.3",
      "test": "Messages table",
      "passed": false,
      "message": "Could not query messages table"
    },
    {
      "phase": "Phase 2",
      "section": "2.3",
      "test": "Delivery ack handler",
      "passed": true,
      "message": "Delivery acknowledgement handler exists"
    },
    {
      "phase": "Phase 2",
      "section": "2.4",
      "test": "Redis pub/sub",
      "passed": true,
      "message": "Redis pub/sub configured"
    },
    {
      "phase": "Phase 2",
      "section": "2.4",
      "test": "Connection limits",
      "passed": true,
      "message": "Room connection limits configured"
    },
    {
      "phase": "Phase 2",
      "section": "2.4",
      "test": "Clustering support",
      "passed": true,
      "message": "Clustering support found"
    },
    {
      "phase": "Phase 3",
      "section": "3.1",
      "test": "Index check",
      "passed": false,
      "message": "Could not query indexes"
    },
    {
      "phase": "Phase 3",
      "section": "3.1",
      "test": "Conversation indexes",
      "passed": false,
      "message": "Could not check conversation indexes"
    },
    {
      "phase": "Phase 3",
      "section": "3.2",
      "test": "Pagination helpers",
      "passed": true,
      "message": "Pagination helpers exist"
    },
    {
      "phase": "Phase 3",
      "section": "3.2",
      "test": "Cursor pagination",
      "passed": true,
      "message": "Cursor-based pagination implemented"
    },
    {
      "phase": "Phase 3",
      "section": "3.2",
      "test": "Limit validation",
      "passed": true,
      "message": "Limit validation (max 100) implemented"
    },
    {
      "phase": "Phase 3",
      "section": "3.2",
      "test": "Pagination metadata",
      "passed": true,
      "message": "Pagination metadata implemented"
    },
    {
      "phase": "Phase 3",
      "section": "3.3",
      "test": "Archive table",
      "passed": false,
      "message": "Message archives table missing"
    },
    {
      "phase": "Phase 3",
      "section": "3.3",
      "test": "Archival service",
      "passed": true,
      "message": "Message archival service exists"
    },
    {
      "phase": "Phase 3",
      "section": "3.3",
      "test": "Archival job",
      "passed": true,
      "message": "Archival cron job exists"
    },
    {
      "phase": "Phase 3",
      "section": "3.3",
      "test": "Archive encryption",
      "passed": true,
      "message": "Archive encryption implemented"
    },
    {
      "phase": "Phase 3",
      "section": "3.4",
      "test": "Cache service",
      "passed": true,
      "message": "Cache service exists"
    },
    {
      "phase": "Phase 3",
      "section": "3.4",
      "test": "Cache functionality",
      "passed": true,
      "message": "Redis caching functional"
    },
    {
      "phase": "Phase 3",
      "section": "3.4",
      "test": "Cache invalidation",
      "passed": true,
      "message": "Cache invalidation implemented"
    },
    {
      "phase": "Phase 3",
      "section": "3.4",
      "test": "Cache metrics",
      "passed": true,
      "message": "Cache metrics implemented"
    }
  ],
  "summary": {
    "Phase 1": {
      "passed": 11,
      "failed": 2,
      "total": 13
    },
    "Phase 2": {
      "passed": 10,
      "failed": 1,
      "total": 11
    },
    "Phase 3": {
      "passed": 11,
      "failed": 3,
      "total": 14
    }
  }
}