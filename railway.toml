# Railway Config-as-Code Configuration
# This file defines build and deployment settings for Railway
# See: https://docs.railway.com/deploy/config-as-code
#
# Note: Config-as-code settings override dashboard settings
# Settings defined here will always take precedence

[build]
builder = "DOCKERFILE"
dockerfilePath = "Dockerfile"

[deploy]
startCommand = "node dist/server/index.js"
healthcheckPath = "/health"
healthcheckTimeout = 100
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

# Note: Environment variables are NOT stored in this file for security reasons.
# Set them in Railway Dashboard â†’ Variables tab or via Railway CLI:
# 
# Required Environment Variables:
# - NEXT_PUBLIC_SUPABASE_URL
# - SUPABASE_SERVICE_ROLE_KEY
# - JWT_SECRET
# - NODE_ENV=production
# - REDIS_URL (auto-set when Redis service is added)
#
# See RAILWAY_ENV_SETUP.md for details
#
# Optional: preDeployCommand can be added if you need to run migrations:
# preDeployCommand = ["npm run db:migrate"]
# (Not needed since we use Supabase, not Railway PostgreSQL)

